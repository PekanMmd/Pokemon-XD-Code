//
//  main.swift
//  ColosseumToolCL
//
//  Created by The Steez on 27/08/2018.
//
//

import Foundation
import AppKit

ToolProcess.loadISO(exitOnFailure: true)

// Alolan Marowak is boosted by thick club
let thickClubOffset = 0x232660 - kDolToRAMOffsetDifference
let alolawakId = 253
let asm: ASM = [
	.cmplwi(.r30, 65),
	.bne_f(0, 0x20),
	.cmplwi(.r31, 104),
	.beq_f(0, 0x14),
	.cmplwi(.r31, 105),
	.beq_f(0, 0xc),
	.cmplwi(.r31, alolawakId.unsigned),
	.bne_f(0, 0x8),
]
asm.asGeckoCode(RAMOffset: 0x232660).println()
thickClubOffset.hexString().println()

//let face = XGFiles.fsys("poke_face")
//let body = XGFiles.fsys("poke_body")
//let faceFsys = face.fsysData
//let bodyFsys = body.fsysData
//
//for i in 0 ..< bodyFsys.numberOfEntries {
//	let name = bodyFsys.filenames[i]
//	let id = bodyFsys.identifierForFile(index: i)
//	print("\(name.spaceToLength(12)) \(id.hexString())")
//}

//print(faceFsys.numberOfEntries)
//print(bodyFsys.numberOfEntries)
//
//let dittoFace = XGFiles.nameAndFsysName("face132.gtx", face.fileName.removeFileExtensions()).data!
//let dittoBody = XGFiles.nameAndFsysName("body132.gtx", body.fileName.removeFileExtensions()).data!
//let dittoBodyShiny = XGFiles.nameAndFsysName("body132_c.gtx", body.fileName.removeFileExtensions()).data!
//
//var nextFaceID = 0xC000
//var nextBodyID = 0xD000
//
//func getFaceID() -> Int {
//	let id = nextFaceID
//	nextFaceID += 1
//	return id
//}
//func getBodyID() -> Int {
//	let id = nextBodyID
//	nextBodyID += 1
//	return id
//}
//for i in 1 ... 100 {
//	dittoFace.file = .nameAndFolder("extra_face_\(i).gtx", dittoFace.file.folder)
//	dittoBody.file = .nameAndFolder("extra_body_\(i).gtx", dittoBody.file.folder)
//	dittoBodyShiny.file = .nameAndFolder("extra_body_\(i)_c.gtx", dittoBodyShiny.file.folder)
//	faceFsys.addFile(dittoFace, fileType: .gtx, compress: true, shortID: getFaceID())
//	bodyFsys.addFile(dittoBody, fileType: .gtx, compress: true, shortID: getBodyID())
//	bodyFsys.addFile(dittoBodyShiny, fileType: .gtx, compress: true, shortID: getBodyID())
//}
//print(faceFsys.numberOfEntries)
//print(bodyFsys.numberOfEntries)

//faceFsys.save()
//bodyFsys.save()



//let ws = NSWorkspace.shared
//let apps = ws.runningApplications
//
//for app in apps {
//	guard let id = app.bundleIdentifier else { continue }
//	print(id)
//	if id.contains("dolphin") {
//		app.activate(options: .activateIgnoringOtherApps)
//	}
//}

//// get all unused strings by id
//let unusedIDRanges = [
//	[0x12d],
//	[0xc68],
//	[0xd49 ... 0xd51],
//	[0xd5d ... 0xd60],
//	[0xdb1],
//	[0xdb3],
//	[0xdbc],
//	[0xdc5],
//	[0xfa1 ... 0xfa2],
//	[0x1007],
//	[0x1053],
//	[0x1078],
//	[0x110b ... 0x110e],
//	[0x111f ... 0x1122],
//	[0x1133 ... 0x113b],
//	[0x113d ... 0x113e],
//	[0x1141 ... 0x1146],
//	[0x1148 ... 0x1149],
//	[0x1163 ... 0x1164],
//	[0x116d],
//	[0x1179],
//	[0x1181],
//	[0x118a],
//	[0x1193],
//	[0x119d],
//	[0x11a6 ... 0x11a7],
//	[0x11ac],
//	[0x11ae ... 0x11af],
//	[0x1224],
//	[0x1279],
//	[0x128b],
//	[0x128f],
//	[0x129d],
//	[0x12ae ... 0x12af],
//	[0x12b2 ... 0x12b3],
//	[0x138d],
//	[0x13e0 ... 0x13eb],
//	[0x1416],
//	[0x17a2 ... 0x17a5],
//	[0x191f ... 0x1923],
//	[0x1b65 ... 0x1b66],
//	[0x2715],
//	[0x2768 ... 0x2773],
//	[0x279e],
//	[0x2be9],
//	[0x2ee1 ... 0x2ee8],
//	[0x2ef8],
//	[0x3b53 ... 0x3b91],
//	[0x3bcb],
//	[0x3bd7],
//	[0x3c50 ... 0x3c51],
//	[0x3c53],
//	[0x3c7c ... 0x3cb2],
//	[0x3cbe ... 0x3cd3],
//	[0x3d8a],
//	[0x3d8c],
//	[0x3e94 ... 0x3e96],
//	[0x3e99 ... 0x3e9e],
//	[0x3ea0],
//	[0x3ea2],
//	[0x3ea4],
//	[0x3ea6 ... 0x3ea7],
//	[0x3ea9],
//	[0x3eab ... 0x3eb8],
//	[0x3eba],
//	[0x3ec2 ... 0x3ec4],
//	[0x3ec6 ... 0x3ec8],
//	[0x3ed0 ... 0x3ed2],
//	[0x3ed4 ... 0x3ed6],
//	[0x3ed8 ... 0x3ee1],
//	[0x3ee3 ... 0x3ee4],
//	[0x3ee6 ... 0x3eeb],
//	[0x3eed],
//	[0x3eef],
//	[0x3ef5 ... 0x3ef8],
//	[0x3efe ... 0x3f01],
//	[0x3f05 ... 0x3f07],
//	[0x3f0b ... 0x3f02],
//	[0x3f10 ... 0x3f14],
//	[0x3f16],
//	[0x3f18],
//	[0x3f1a],
//	[0x3f1c],
//	[0x3f1e ... 0x3f2b],
//	[0x3f82 ... 0x3f83],
//	[0x3f96],
//	[0x3f9e],
//	[0x3fae],
//	[0x3fba],
//	[0x3fc0],
//	[0x3fcd ... 0x3fcf],
//	[0x3ff3],
//	[0x4031],
//	[0x4042],
//	[0x404c],
//	[0x405d],
//	[0x407c],
//	[0x408b],
//	[0x40af],
//	[0x04b3],
//	[0x40c3],
//	[0x40cc],
//	[0x40e0],
//	[0x40f6],
//	[0x4138],
//	[0x413a],
//	[0x4140],
//	[0x4164 ... 0x4167],
//	[0x416c ... 0x4180],
//	[0x4184],
//	[0x4186],
//	[0x4188],
//	[0x418a],
//	[0x418c ... 0x41a0],
//	[0x41a2],
//	[0x41a4],
//	[0x41a7 ... 0x41ab],
//	[0x41ad ... 0x41ae],
//	[0x41b0 ... 0x41f8],
//	[0x425f],
//	[0x4264],
//	[0x4267 ... 0x4268],
//	[0x4273],
//	[0x4278 ... 0x427b],
//	[0x4280 ... 0x4281],
//	[0x4288],
//	[0x428b],
//	[0x428d ... 0x428e],
//	[0x4290],
//	[0x4292 ... 0x429d],
//	[0x429f ... 0x42a0],
//	[0x42a2 ... 0x42a3],
//	[0x42a5 ... 0x42b3],
//	[0x42b5],
//	[0x42b7],
//	[0x42b9],
//	[0x42bc],
//	[0x42bf],
//	[0x42c1 ... 0x42d0],
//	[0x42d3 ... 0x42d4],
//	[0x42de ... 0x42e6],
//	[0x42e9 ... 0x4309],
//	[0x430b],
//	[0x430d ... 0x430e],
//	[0x4310 ... 0x4311],
//	[0x4313 ... 0x4317],
//	[0x431b ... 0x431c],
//	[0x431e],
//	[0x4320 ... 0x4327],
//	[0x4329],
//	[0x432b ... 0x432c],
//	[0x432e ... 0x4332],
//	[0x4334],
//	[0x4337],
//	[0x4341 ... 0x4346],
//	[0x434d ... 0x4356],
//	[0x4358 ... 0x436d],
//	[0x436f ... 0x437f],
//	[0x4386 ... 0x438f],
//	[0x4392 ... 0x439c],
//	[0x43a1 ... 0x43d3],
//	[0x43f5],
//	[0x4361],
//	[0x440f ... 0x4410],
//	[0x4417],
//	[0x4434 ... 0x443e],
//	[0x4458],
//	[0x445a],
//	[0x445c ... 0x4464],
//	[0x4466],
//	[0x4469],
//	[0x446b],
//	[0x446d],
//	[0x446f],
//	[0x4471],
//	[0x4473 ... 0x4474],
//	[0x4476 ... 0x4477],
//	[0x4479 ... 0x4471],
//	[0x4473 ... 0x4474],
//	[0x4476 ... 0x4477],
//	[0x4479 ... 0x447a],
//	[0x447d ... 0x4482],
//	[0x4485],
//	[0x4487],
//	[0x4489],
//	[0x448b ... 0x44a8],
//	[0x44b0],
//	[0x44cf],
//	[0x44e0],
//	[0x44ed ... 0x44ee],
//	[0x4e21],
//	[0x4f63 ... 0x4f64],
//	[0x4f9a],
//	[0x4ff1],
//	[0x5176],
//	[0x517b ... 0x517d],
//	[0x523c ... 0x523f],
//	[0x5241],
//	[0x5243],
//	[0x5245],
//	[0x5247],
//	[0x5249 ... 0x524b],
//	[0x5256 ... 0x5257],
//	[0x5264 ... 0x5265],
//	[0x526a ... 0x526b],
//	[0x5271],
//	[0x5277],
//	[0x52b5],
//	[0x52ed],
//	[0x52ef],
//	[0x5355],
//	[0x5364],
//	[0x5390],
//	[0x539d],
//	[0x53d5],
//	[0x542c],
//	[0x5431],
//	[0x5452 ... 0x5453],
//	[0x54f7 ... 0x54fa],
//	[0x5506 ... 0x5508],
//	[0x5512],
//	[0x55d3],
//	[0x5a26 ... 0x5a27],
//	[0x5bf7 ... 0x5bfa],
//	[0x5bfc],
//	[0x5c71],
//	[0x7549 ... 0x754a],
//	[0x755d],
//	[0x756a ... 0x756b],
//	[0x75d0],
//	[0x75f7],
//	[0x7638 ... 0x763b],
//	[0x763d],
//	[0x763f ... 0x7645],
//	[0x764b],
//	[0x764d],
//	[0x765a],
//	[0x766e ... 0x766f],
//	[0x769e ... 0x769f],
//	[0x76a6],
//	[0x76a9],
//	[0x76ad],
//	[0x76e4 ... 0x76f5],
//	[0x76ff ... 0x7700],
//	[0x7a7e],
//	[0xea60 ... 0xf318],
//]
//
//for range in unusedIDRanges {
//	for id in range {
//		getStringSafelyWithID(id: id).println()
//	}
//}


//PDADumper.dumpData()
//PDADumper.dumpFiles(writeTextures: false)
//PDADumper.dumpMSG()



//PDADumper.dumpAll()







